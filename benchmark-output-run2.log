> Task :buildSrc:reaper:compileJava UP-TO-DATE
> Task :buildSrc:reaper:processResources NO-SOURCE
> Task :buildSrc:reaper:classes UP-TO-DATE
> Task :buildSrc:reaper:jar UP-TO-DATE
> Task :buildSrc:compileJava UP-TO-DATE
> Task :buildSrc:compileGroovy UP-TO-DATE
> Task :buildSrc:generateVersionProperties UP-TO-DATE
> Task :buildSrc:pluginDescriptors UP-TO-DATE
> Task :buildSrc:processResources UP-TO-DATE
> Task :buildSrc:classes UP-TO-DATE
> Task :buildSrc:jar UP-TO-DATE

> Configure project :server
Declaring dependencies using multi-string notation has been deprecated. This will fail with an error in Gradle 10. Please use single-string notation instead: "com.google.protobuf:protoc:3.25.8:osx-aarch_64@exe". Consult the upgrading guide for further information: https://docs.gradle.org/9.2.0/userguide/upgrading_version_9.html#dependency_multi_string_notation
=======================================
OpenSearch Build Hamster says Hello!
  Gradle Version        : 9.2.0
  OS Info               : Mac OS X 26.1 (aarch64)
  JDK Version           : 25 (OpenJDK JDK 25 (25+36-3489))
  JAVA_HOME             : /Library/Java/JavaVirtualMachines/jdk-25.jdk/Contents/Home
  Random Testing Seed   : 7CDCA9166BD6A0D3
  Crypto Standard       : any-supported
=======================================

> Task :server:protobufDummy UP-TO-DATE
> Task :libs:opensearch-cli:processResources NO-SOURCE
> Task :libs:opensearch-common:processResources UP-TO-DATE
> Task :libs:opensearch-secure-sm:processResources NO-SOURCE
> Task :libs:opensearch-x-content:processResources UP-TO-DATE
> Task :libs:opensearch-task-commons:processResources NO-SOURCE
> Task :libs:opensearch-plugin-classloader:processResources NO-SOURCE
> Task :libs:opensearch-telemetry:processResources NO-SOURCE
> Task :libs:opensearch-compress:processResources UP-TO-DATE
> Task :server:extractProto UP-TO-DATE
> Task :libs:opensearch-geo:processResources NO-SOURCE
> Task :libs:agent-sm:agent-policy:compileJava UP-TO-DATE
> Task :libs:agent-sm:bootstrap:compileJava UP-TO-DATE
> Task :libs:opensearch-core:processResources UP-TO-DATE
> Task :libs:agent-sm:bootstrap:processResources NO-SOURCE
> Task :server:generateModulesList UP-TO-DATE
> Task :benchmarks:processResources UP-TO-DATE
> Task :libs:opensearch-common:compileJava UP-TO-DATE
> Task :libs:agent-sm:agent-policy:processResources NO-SOURCE
> Task :server:generatePluginsList UP-TO-DATE
> Task :libs:opensearch-common:classes UP-TO-DATE
> Task :libs:opensearch-plugin-classloader:compileJava UP-TO-DATE
> Task :libs:opensearch-secure-sm:compileJava UP-TO-DATE
> Task :libs:opensearch-geo:compileJava UP-TO-DATE
> Task :libs:agent-sm:agent-policy:classes UP-TO-DATE
> Task :libs:opensearch-secure-sm:classes UP-TO-DATE
> Task :libs:opensearch-telemetry:compileJava UP-TO-DATE
> Task :libs:opensearch-cli:compileJava UP-TO-DATE
> Task :libs:opensearch-core:compileJava UP-TO-DATE
> Task :libs:opensearch-core:classes UP-TO-DATE
> Task :libs:opensearch-geo:classes UP-TO-DATE
> Task :libs:opensearch-task-commons:compileJava UP-TO-DATE
> Task :libs:opensearch-cli:classes UP-TO-DATE
> Task :libs:opensearch-compress:compileJava UP-TO-DATE
> Task :libs:opensearch-telemetry:classes UP-TO-DATE
> Task :libs:opensearch-task-commons:classes UP-TO-DATE
> Task :libs:opensearch-compress:classes UP-TO-DATE
> Task :libs:opensearch-x-content:compileJava UP-TO-DATE
> Task :libs:opensearch-x-content:classes UP-TO-DATE
> Task :server:extractIncludeProto UP-TO-DATE
> Task :server:generateProto UP-TO-DATE
> Task :server:processResources UP-TO-DATE
> Task :libs:agent-sm:agent-policy:jar UP-TO-DATE
> Task :libs:opensearch-common:jar UP-TO-DATE
> Task :libs:opensearch-core:jar UP-TO-DATE
> Task :server:compileJava UP-TO-DATE
> Task :server:classes UP-TO-DATE
> Task :libs:opensearch-secure-sm:jar UP-TO-DATE
> Task :libs:opensearch-geo:jar UP-TO-DATE
> Task :libs:opensearch-cli:jar UP-TO-DATE
> Task :libs:opensearch-telemetry:jar UP-TO-DATE
> Task :libs:opensearch-task-commons:jar UP-TO-DATE
> Task :libs:opensearch-compress:jar UP-TO-DATE
> Task :libs:opensearch-x-content:jar UP-TO-DATE
> Task :server:jar UP-TO-DATE

> Task :benchmarks:compileJava
Note: /Users/hvamsi/code/OpenSearch/benchmarks/src/main/java/org/opensearch/benchmark/time/DateFormatterBenchmark.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.

> Task :benchmarks:classes

> Task :benchmarks:run
WARNING: Using incubator modules: jdk.incubator.vector
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by org.openjdk.jmh.util.Utils (file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.openjdk.jmh/jmh-core/1.35/c14d712be8e423969fcd344bc801cf5d3ea3b62a/jmh-core-1.35.jar)
WARNING: Please consider reporting this to the maintainers of class org.openjdk.jmh.util.Utils
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
# JMH version: 1.35
# VM version: JDK 25, OpenJDK 64-Bit Server VM, 25+36-3489
# VM invoker: /Library/Java/JavaVirtualMachines/jdk-25.jdk/Contents/Home/bin/java
# VM options: -Darrow.memory.alloc.factory=org.apache.arrow.memory.unsafe.UnsafeAllocationManager$UnsafeAllocationManagerFactory -Darrow.memory.debug.allocator=false -Dio.netty.tryReflectionSetAccessible=true --add-modules=jdk.incubator.vector -Xmx3g -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant --add-modules=jdk.incubator.vector --add-opens=java.base/java.nio=org.apache.arrow.memory.core,ALL-UNNAMED
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 2 s each
# Measurement: 5 iterations, 3 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduce
# Parameters: (avgKeyLength = 100, numShards = 10, totalDocuments = 10000000, uniqueTerms = 100000)

# Run progress: 0.00% complete, ETA 00:01:24
# Fork: 1 of 1
WARNING: Using incubator modules: jdk.incubator.vector
WARNING: Unknown module: org.apache.arrow.memory.core specified to --add-opens
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by org.openjdk.jmh.util.Utils (file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.openjdk.jmh/jmh-core/1.35/c14d712be8e423969fcd344bc801cf5d3ea3b62a/jmh-core-1.35.jar)
WARNING: Please consider reporting this to the maintainers of class org.openjdk.jmh.util.Utils
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
# Warmup Iteration   1: ERROR StatusConsoleListener Error creating converter for node_name
 java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.apache.logging.log4j.core.pattern.PatternParser.createConverter(PatternParser.java:582)
	at org.apache.logging.log4j.core.pattern.PatternParser.finalizeConverter(PatternParser.java:649)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:412)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:177)
	at org.apache.logging.log4j.core.layout.PatternLayout$SerializerBuilder.build(PatternLayout.java:473)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:139)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:60)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:766)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:626)
	at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)
	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)
	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:245)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)
	at org.apache.logging.log4j.LogManager.getContext(LogManager.java:176)
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:666)
	at org.opensearch.common.logging.DeprecationLogger.getDeprecatedLoggerForName(DeprecationLogger.java:94)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:85)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:75)
	at org.opensearch.common.util.concurrent.OpenSearchExecutors.<clinit>(OpenSearchExecutors.java:70)
	at org.opensearch.common.util.PageCacheRecycler.<init>(PageCacheRecycler.java:120)
	at org.opensearch.common.util.PageCacheRecycler.<clinit>(PageCacheRecycler.java:114)
	at org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.setup(ArrowBenchmark.java:150)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduce_jmhTest._jmh_tryInit_f_arrowbenchmark0_G(ArrowBenchmark_arrowReduce_jmhTest.java:451)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduce_jmhTest.arrowReduce_AverageTime(ArrowBenchmark_arrowReduce_jmhTest.java:162)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:475)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:458)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: java.lang.IllegalStateException: the node name hasn't been set
	at org.opensearch.common.logging.NodeNamePatternConverter.newInstance(NodeNamePatternConverter.java:76)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	... 45 more
ERROR StatusConsoleListener Unrecognized conversion specifier [node_name] starting at position 38 in conversion pattern.
SLF4J(W): No SLF4J providers were found.
SLF4J(W): Defaulting to no-operation (NOP) logger implementation
SLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J(W): Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J(W): Ignoring binding found at [jar:file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.21.0/911fdb5b1a1df36719c579ecc6f2957b88bce1ab/log4j-slf4j-impl-2.21.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J(W): See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
209.943 ms/op
# Warmup Iteration   2: 215.213 ms/op
# Warmup Iteration   3: 218.965 ms/op
Iteration   1: 226.544 ms/op
Iteration   2: 240.810 ms/op
Iteration   3: 317.967 ms/op
Iteration   4: 245.115 ms/op
Iteration   5: 233.814 ms/op


Result "org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduce":
  252.850 ±(99.9%) 142.778 ms/op [Average]
  (min, avg, max) = (226.544, 252.850, 317.967), stdev = 37.079
  CI (99.9%): [110.072, 395.628] (assumes normal distribution)


# JMH version: 1.35
# VM version: JDK 25, OpenJDK 64-Bit Server VM, 25+36-3489
# VM invoker: /Library/Java/JavaVirtualMachines/jdk-25.jdk/Contents/Home/bin/java
# VM options: -Darrow.memory.alloc.factory=org.apache.arrow.memory.unsafe.UnsafeAllocationManager$UnsafeAllocationManagerFactory -Darrow.memory.debug.allocator=false -Dio.netty.tryReflectionSetAccessible=true --add-modules=jdk.incubator.vector -Xmx3g -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant --add-modules=jdk.incubator.vector --add-opens=java.base/java.nio=org.apache.arrow.memory.core,ALL-UNNAMED
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 2 s each
# Measurement: 5 iterations, 3 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduceOptimized
# Parameters: (avgKeyLength = 100, numShards = 10, totalDocuments = 10000000, uniqueTerms = 100000)

# Run progress: 25.00% complete, ETA 00:01:10
# Fork: 1 of 1
WARNING: Using incubator modules: jdk.incubator.vector
WARNING: Unknown module: org.apache.arrow.memory.core specified to --add-opens
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by org.openjdk.jmh.util.Utils (file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.openjdk.jmh/jmh-core/1.35/c14d712be8e423969fcd344bc801cf5d3ea3b62a/jmh-core-1.35.jar)
WARNING: Please consider reporting this to the maintainers of class org.openjdk.jmh.util.Utils
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
# Warmup Iteration   1: ERROR StatusConsoleListener Error creating converter for node_name
 java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.apache.logging.log4j.core.pattern.PatternParser.createConverter(PatternParser.java:582)
	at org.apache.logging.log4j.core.pattern.PatternParser.finalizeConverter(PatternParser.java:649)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:412)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:177)
	at org.apache.logging.log4j.core.layout.PatternLayout$SerializerBuilder.build(PatternLayout.java:473)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:139)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:60)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:766)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:626)
	at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)
	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)
	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:245)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)
	at org.apache.logging.log4j.LogManager.getContext(LogManager.java:176)
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:666)
	at org.opensearch.common.logging.DeprecationLogger.getDeprecatedLoggerForName(DeprecationLogger.java:94)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:85)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:75)
	at org.opensearch.common.util.concurrent.OpenSearchExecutors.<clinit>(OpenSearchExecutors.java:70)
	at org.opensearch.common.util.PageCacheRecycler.<init>(PageCacheRecycler.java:120)
	at org.opensearch.common.util.PageCacheRecycler.<clinit>(PageCacheRecycler.java:114)
	at org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.setup(ArrowBenchmark.java:150)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduceOptimized_jmhTest._jmh_tryInit_f_arrowbenchmark0_G(ArrowBenchmark_arrowReduceOptimized_jmhTest.java:451)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduceOptimized_jmhTest.arrowReduceOptimized_AverageTime(ArrowBenchmark_arrowReduceOptimized_jmhTest.java:162)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:475)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:458)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: java.lang.IllegalStateException: the node name hasn't been set
	at org.opensearch.common.logging.NodeNamePatternConverter.newInstance(NodeNamePatternConverter.java:76)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	... 45 more
ERROR StatusConsoleListener Unrecognized conversion specifier [node_name] starting at position 38 in conversion pattern.
SLF4J(W): No SLF4J providers were found.
SLF4J(W): Defaulting to no-operation (NOP) logger implementation
SLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J(W): Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J(W): Ignoring binding found at [jar:file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.21.0/911fdb5b1a1df36719c579ecc6f2957b88bce1ab/log4j-slf4j-impl-2.21.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J(W): See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
404.188 ms/op
# Warmup Iteration   2: 305.282 ms/op
# Warmup Iteration   3: 344.766 ms/op
Iteration   1: 330.072 ms/op
Iteration   2: 334.708 ms/op
Iteration   3: 309.134 ms/op
Iteration   4: 318.147 ms/op
Iteration   5: 359.142 ms/op


Result "org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduceOptimized":
  330.241 ±(99.9%) 73.238 ms/op [Average]
  (min, avg, max) = (309.134, 330.241, 359.142), stdev = 19.020
  CI (99.9%): [257.002, 403.479] (assumes normal distribution)


# JMH version: 1.35
# VM version: JDK 25, OpenJDK 64-Bit Server VM, 25+36-3489
# VM invoker: /Library/Java/JavaVirtualMachines/jdk-25.jdk/Contents/Home/bin/java
# VM options: -Darrow.memory.alloc.factory=org.apache.arrow.memory.unsafe.UnsafeAllocationManager$UnsafeAllocationManagerFactory -Darrow.memory.debug.allocator=false -Dio.netty.tryReflectionSetAccessible=true --add-modules=jdk.incubator.vector -Xmx3g -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant --add-modules=jdk.incubator.vector --add-opens=java.base/java.nio=org.apache.arrow.memory.core,ALL-UNNAMED
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 2 s each
# Measurement: 5 iterations, 3 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduceSIMD
# Parameters: (avgKeyLength = 100, numShards = 10, totalDocuments = 10000000, uniqueTerms = 100000)

# Run progress: 50.00% complete, ETA 00:00:47
# Fork: 1 of 1
WARNING: Using incubator modules: jdk.incubator.vector
WARNING: Unknown module: org.apache.arrow.memory.core specified to --add-opens
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by org.openjdk.jmh.util.Utils (file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.openjdk.jmh/jmh-core/1.35/c14d712be8e423969fcd344bc801cf5d3ea3b62a/jmh-core-1.35.jar)
WARNING: Please consider reporting this to the maintainers of class org.openjdk.jmh.util.Utils
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
# Warmup Iteration   1: ERROR StatusConsoleListener Error creating converter for node_name
 java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.apache.logging.log4j.core.pattern.PatternParser.createConverter(PatternParser.java:582)
	at org.apache.logging.log4j.core.pattern.PatternParser.finalizeConverter(PatternParser.java:649)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:412)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:177)
	at org.apache.logging.log4j.core.layout.PatternLayout$SerializerBuilder.build(PatternLayout.java:473)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:139)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:60)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:766)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:626)
	at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)
	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)
	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:245)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)
	at org.apache.logging.log4j.LogManager.getContext(LogManager.java:176)
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:666)
	at org.opensearch.common.logging.DeprecationLogger.getDeprecatedLoggerForName(DeprecationLogger.java:94)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:85)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:75)
	at org.opensearch.common.util.concurrent.OpenSearchExecutors.<clinit>(OpenSearchExecutors.java:70)
	at org.opensearch.common.util.PageCacheRecycler.<init>(PageCacheRecycler.java:120)
	at org.opensearch.common.util.PageCacheRecycler.<clinit>(PageCacheRecycler.java:114)
	at org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.setup(ArrowBenchmark.java:150)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduceSIMD_jmhTest._jmh_tryInit_f_arrowbenchmark0_G(ArrowBenchmark_arrowReduceSIMD_jmhTest.java:451)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_arrowReduceSIMD_jmhTest.arrowReduceSIMD_AverageTime(ArrowBenchmark_arrowReduceSIMD_jmhTest.java:162)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:475)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:458)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: java.lang.IllegalStateException: the node name hasn't been set
	at org.opensearch.common.logging.NodeNamePatternConverter.newInstance(NodeNamePatternConverter.java:76)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	... 45 more
ERROR StatusConsoleListener Unrecognized conversion specifier [node_name] starting at position 38 in conversion pattern.
SLF4J(W): No SLF4J providers were found.
SLF4J(W): Defaulting to no-operation (NOP) logger implementation
SLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J(W): Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J(W): Ignoring binding found at [jar:file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.21.0/911fdb5b1a1df36719c579ecc6f2957b88bce1ab/log4j-slf4j-impl-2.21.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J(W): See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
151.696 ms/op
# Warmup Iteration   2: 134.602 ms/op
# Warmup Iteration   3: 132.302 ms/op
Iteration   1: 132.356 ms/op
Iteration   2: 127.588 ms/op
Iteration   3: 125.912 ms/op
Iteration   4: 151.196 ms/op
Iteration   5: 145.867 ms/op


Result "org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.arrowReduceSIMD":
  136.584 ±(99.9%) 43.582 ms/op [Average]
  (min, avg, max) = (125.912, 136.584, 151.196), stdev = 11.318
  CI (99.9%): [93.002, 180.166] (assumes normal distribution)


# JMH version: 1.35
# VM version: JDK 25, OpenJDK 64-Bit Server VM, 25+36-3489
# VM invoker: /Library/Java/JavaVirtualMachines/jdk-25.jdk/Contents/Home/bin/java
# VM options: -Darrow.memory.alloc.factory=org.apache.arrow.memory.unsafe.UnsafeAllocationManager$UnsafeAllocationManagerFactory -Darrow.memory.debug.allocator=false -Dio.netty.tryReflectionSetAccessible=true --add-modules=jdk.incubator.vector -Xmx3g -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant --add-modules=jdk.incubator.vector --add-opens=java.base/java.nio=org.apache.arrow.memory.core,ALL-UNNAMED
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 3 iterations, 2 s each
# Measurement: 5 iterations, 3 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.bigArraysReduce
# Parameters: (avgKeyLength = 100, numShards = 10, totalDocuments = 10000000, uniqueTerms = 100000)

# Run progress: 75.00% complete, ETA 00:00:23
# Fork: 1 of 1
WARNING: Using incubator modules: jdk.incubator.vector
WARNING: Unknown module: org.apache.arrow.memory.core specified to --add-opens
WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by org.openjdk.jmh.util.Utils (file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.openjdk.jmh/jmh-core/1.35/c14d712be8e423969fcd344bc801cf5d3ea3b62a/jmh-core-1.35.jar)
WARNING: Please consider reporting this to the maintainers of class org.openjdk.jmh.util.Utils
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
# Warmup Iteration   1: ERROR StatusConsoleListener Error creating converter for node_name
 java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.apache.logging.log4j.core.pattern.PatternParser.createConverter(PatternParser.java:582)
	at org.apache.logging.log4j.core.pattern.PatternParser.finalizeConverter(PatternParser.java:649)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:412)
	at org.apache.logging.log4j.core.pattern.PatternParser.parse(PatternParser.java:177)
	at org.apache.logging.log4j.core.layout.PatternLayout$SerializerBuilder.build(PatternLayout.java:473)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:139)
	at org.apache.logging.log4j.core.layout.PatternLayout.<init>(PatternLayout.java:60)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:766)
	at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:626)
	at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)
	at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)
	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)
	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:245)
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)
	at org.apache.logging.log4j.LogManager.getContext(LogManager.java:176)
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:666)
	at org.opensearch.common.logging.DeprecationLogger.getDeprecatedLoggerForName(DeprecationLogger.java:94)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:85)
	at org.opensearch.common.logging.DeprecationLogger.getLogger(DeprecationLogger.java:75)
	at org.opensearch.common.util.concurrent.OpenSearchExecutors.<clinit>(OpenSearchExecutors.java:70)
	at org.opensearch.common.util.PageCacheRecycler.<init>(PageCacheRecycler.java:120)
	at org.opensearch.common.util.PageCacheRecycler.<clinit>(PageCacheRecycler.java:114)
	at org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.setup(ArrowBenchmark.java:150)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_bigArraysReduce_jmhTest._jmh_tryInit_f_arrowbenchmark0_G(ArrowBenchmark_bigArraysReduce_jmhTest.java:451)
	at org.opensearch.benchmark.search.aggregations.arrow.jmh_generated.ArrowBenchmark_bigArraysReduce_jmhTest.bigArraysReduce_AverageTime(ArrowBenchmark_bigArraysReduce_jmhTest.java:162)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:475)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:458)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:545)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1090)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
	at java.base/java.lang.Thread.run(Thread.java:1474)
Caused by: java.lang.IllegalStateException: the node name hasn't been set
	at org.opensearch.common.logging.NodeNamePatternConverter.newInstance(NodeNamePatternConverter.java:76)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	... 45 more
ERROR StatusConsoleListener Unrecognized conversion specifier [node_name] starting at position 38 in conversion pattern.
SLF4J(W): No SLF4J providers were found.
SLF4J(W): Defaulting to no-operation (NOP) logger implementation
SLF4J(W): See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J(W): Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J(W): Ignoring binding found at [jar:file:/Users/hvamsi/.gradle/caches/modules-2/files-2.1/org.apache.logging.log4j/log4j-slf4j-impl/2.21.0/911fdb5b1a1df36719c579ecc6f2957b88bce1ab/log4j-slf4j-impl-2.21.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J(W): See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
183.608 ms/op
# Warmup Iteration   2: 177.970 ms/op
# Warmup Iteration   3: 183.907 ms/op
Iteration   1: 178.403 ms/op
Iteration   2: 173.469 ms/op
Iteration   3: 163.497 ms/op
Iteration   4: 179.534 ms/op
Iteration   5: 170.364 ms/op


Result "org.opensearch.benchmark.search.aggregations.arrow.ArrowBenchmark.bigArraysReduce":
  173.054 ±(99.9%) 25.054 ms/op [Average]
  (min, avg, max) = (163.497, 173.054, 179.534), stdev = 6.507
  CI (99.9%): [147.999, 198.108] (assumes normal distribution)


# Run complete. Total time: 00:01:32

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                            (avgKeyLength)  (numShards)  (totalDocuments)  (uniqueTerms)  Mode  Cnt    Score     Error  Units
ArrowBenchmark.arrowReduce                      100           10          10000000         100000  avgt    5  252.850 ± 142.778  ms/op
ArrowBenchmark.arrowReduceOptimized             100           10          10000000         100000  avgt    5  330.241 ±  73.238  ms/op
ArrowBenchmark.arrowReduceSIMD                  100           10          10000000         100000  avgt    5  136.584 ±  43.582  ms/op
ArrowBenchmark.bigArraysReduce                  100           10          10000000         100000  avgt    5  173.054 ±  25.054  ms/op

[Incubating] Problems report is available at: file:///Users/hvamsi/code/OpenSearch/build/reports/problems/problems-report.html

BUILD SUCCESSFUL in 1m 37s
45 actionable tasks: 2 executed, 43 up-to-date
